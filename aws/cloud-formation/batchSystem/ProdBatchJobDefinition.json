{
  "jobDefinitionName": "ProdBatchJobDefinition",
  "type": "container",
  "retryStrategy": {
    "attempts": 1
  },
  "timeout": {
    "attemptDurationSeconds": 604800
  },
  "platformCapabilities": [
    "FARGATE"
  ],
  "containerProperties": {
    "image": "475079312496.dkr.ecr.eu-west-1.amazonaws.com/digiroad2:prod",
    "resourceRequirements" : [
      {
        "type": "MEMORY",
        "value": "30720"
      },
      {
        "type": "VCPU",
        "value": "4"
      }
    ],
    "executionRoleArn": "arn:aws:iam::920408837790:role/digiroad-batch-system-BatchTaskRole-NTGCBVRU7CCR",
    "environment": [
      {
        "name": "containerCPU",
        "value": "-XX:ActiveProcessorCount=4"
      },
      {
        "name": "speedLimitProvider",
        "value": "fi.liikennevirasto.digiroad2.service.linearasset.SpeedLimitService"
      },
      {
        "name": "userProvider",
        "value": "fi.liikennevirasto.digiroad2.dao.PostGISUserProvider"
      },
      {
        "name": "municipalityProvider",
        "value": "fi.liikennevirasto.digiroad2.dao.PostGISMunicipalityProvider"
      },
      {
        "name": "eventBus",
        "value": "fi.liikennevirasto.digiroad2.DigiroadEventBus"
      },
      {
        "name": "useVVHGeometry",
        "value": "true"
      },
      {
        "name": "vvhServiceHost",
        "value": "haproxy.vayla.fi"
      },
      {
        "name": "vvhRestApiEndPoint",
        "value": "https://haproxy.vayla.fi:2027/vvhdata/"
      },
      {
        "name": "vvhRoadlink.frozen",
        "value": "false"
      },
      {
        "name": "viiteRestApiEndPoint",
        "value": "https://api.vaylapilvi.fi/viite/api/viite/"
      },
      {
        "name": "vkmUrl",
        "value": "https://api.vaylapilvi.fi"
      },
      {
        "name": "viite.importTimeStamp",
        "value": "1510876800000"
      },
      {
        "name": "http.proxySet",
        "value": "true"
      },
      {
        "name": "http.proxyHost",
        "value": "127.0.0.1"
      },
      {
        "name": "http.proxyPort",
        "value": "3128"
      },
      {
        "name": "http.nonProxyHosts",
        "value": "172.17.*|localhost|127.*"
      },
      {
        "name": "bonecp.jdbcUrl",
        "value": "jdbc:postgresql://rdspg13prod.chw6qe2cqnfv.eu-west-1.rds.amazonaws.com:5432/digiroad"
      },
      {
        "name": "bonecp.username",
        "value": "digiroad"
      },
      {
        "name": "oag.username",
        "value": "svc_clouddr"
      },
      {
        "name": "batchMode",
        "value": "true"
      },
      {
        "name": "caching",
        "value": "true"
      },
      {
        "name": "cacheHostname",
        "value": "prodroadlinkcache.qrjvyl.cfg.euw1.cache.amazonaws.com"
      },
      {
        "name": "cacheHostPort",
        "value": "11211"
      },
      {
        "name": "cacheTTL",
        "value": "72000"
      }
    ],
    "logConfiguration": {
      "logDriver": "awslogs",
      "options":{
        "awslogs-group": "Prod/batch/job"
      }
    },
    "secrets": [
      {
        "name": "bonecp.password",
        "valueFrom": "arn:aws:ssm:eu-west-1:475079312496:parameter/prod/bonecp.password"
      },
      {
        "name": "oag.password",
        "valueFrom": "arn:aws:ssm:eu-west-1:475079312496:parameter/prod/authentication.oag.basic.password"
      },
      {
        "name": "viite.apikey",
        "valueFrom": "arn:aws:ssm:eu-west-1:475079312496:parameter/prod/apikey/viite"
      },
      {
        "name": "vkm.apikey",
        "valueFrom": "arn:aws:ssm:eu-west-1:475079312496:parameter/prod/apikey/viitekehysmuunnin"
      }
    ]
  }
}
